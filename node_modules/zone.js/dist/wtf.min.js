!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n():"function"==typeof define&&define.amd?define(n):n()}(this,function(){"use strict";function e(n,o){if(!o)return null;var t={};for(var a in n)if(n.hasOwnProperty(a)){var c=n[a];switch(typeof c){case"object":var r=c&&c.constructor&&c.constructor.name;c=r==Object.name?e(c,o-1):r;break;case"function":c=c.name||void 0}t[a]=c}return t}function n(e){var n=e.name;for(e=e.parent;null!=e;)n=e.name+"::"+n,e=e.parent;return n}var o=null,t=null,a=function(){var e=global.wtf;return!(!e||!(o=e.trace))&&(t=o.events,!0)}(),c=function(){function c(){this.name="WTF"}return c.prototype.onFork=function(e,o,t,a){var r=e.fork(t,a);return c.forkInstance(n(t),r.name),r},c.prototype.onInvoke=function(e,a,r,i,s,u,f){var p=c.invokeScope[f];return p||(p=c.invokeScope[f]=t.createScope("Zone:invoke:"+f+"(ascii zone)")),o.leaveScope(p(n(r)),e.invoke(r,i,s,u,f))},c.prototype.onHandleError=function(e,n,o,t){return e.handleError(o,t)},c.prototype.onScheduleTask=function(o,a,r,i){var s=i.type+":"+i.source,u=c.scheduleInstance[s];u||(u=c.scheduleInstance[s]=t.createInstance("Zone:schedule:"+s+"(ascii zone, any data)"));var f=o.scheduleTask(r,i);return u(n(r),e(i.data,2)),f},c.prototype.onInvokeTask=function(e,a,r,i,s,u){var f=i.source,p=c.invokeTaskScope[f];return p||(p=c.invokeTaskScope[f]=t.createScope("Zone:invokeTask:"+f+"(ascii zone)")),o.leaveScope(p(n(r)),e.invokeTask(r,i,s,u))},c.prototype.onCancelTask=function(o,a,r,i){var s=i.source,u=c.cancelInstance[s];u||(u=c.cancelInstance[s]=t.createInstance("Zone:cancel:"+s+"(ascii zone, any options)"));var f=o.cancelTask(r,i);return u(n(r),e(i.data,2)),f},c.forkInstance=a&&t.createInstance("Zone:fork(ascii zone, ascii newZone)"),c.scheduleInstance={},c.cancelInstance={},c.invokeScope={},c.invokeTaskScope={},c}();Zone.wtfZoneSpec=a?new c:null});